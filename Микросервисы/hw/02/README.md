# Задача 1: API Gateway

## Требования к решению
- Маршрутизация запросов к нужному сервису на основе конфигурации.
- Проверка аутентификационной информации в запросах.
- Терминация HTTPS (SSL/TLS).

---

## Сравнительная таблица популярных API Gateway

| Решение         | Маршрутизация | Проверка аутентификации | Терминация HTTPS | Доп. возможности                           | Простота настройки | Масштабируемость | Комментарии                         |
|-----------------|---------------|------------------------|------------------|-------------------------------------------|--------------------|------------------|------------------------------------|
| **Nginx**       | Да            | Через модули/скрипты   | Да               | Высокая производительность, лёгковесность | Средняя            | Высокая          | Требует кастомных конфигов и скриптов |
| **Kong**        | Да            | Встроенная (JWT, OAuth) | Да               | Плагины, мониторинг, API-менеджмент        | Высокая            | Высокая          | Open Source, богатый функционал    |
| **Traefik**     | Да            | Встроенная, интеграция с OAuth | Да          | Автообнаружение сервисов, интеграция с Kubernetes | Высокая            | Высокая          | Отлично подходит для микросервисов |
| **AWS API Gateway** | Да         | Встроенная, IAM, Cognito | Да              | Интеграция с AWS, мониторинг               | Средняя            | Высокая          | Облачное решение, платное          |
| **Envoy**       | Да            | Встроенная (JWT, mTLS)  | Да               | Высокая производительность, фильтры, трассировка | Средняя            | Очень высокая    | Используется как sidecar и edge proxy |

---

## Выбор решения и обоснование

**Рекомендация:** **Kong**

- Обеспечивает гибкую маршрутизацию и встроенную проверку аутентификации.
- Поддерживает SSL-терминацию.
- Имеет удобную систему плагинов (JWT, OAuth, rate limiting и др.).
- Прост в настройке и масштабируем.
- Активное сообщество и поддержка.

**Альтернативы:**

- **Nginx** — подойдёт для лёгких решений, но потребуется доп. настройка аутентификации.
- **Traefik** — лучше подходит для динамичных инфраструктур с Kubernetes.
- **Envoy** — мощный, но сложнее в освоении.

---

# Задача 2: Брокер сообщений

## Требования к решению
- Поддержка кластеризации для надёжности.
- Хранение сообщений на диске в процессе доставки.
- Высокая скорость работы.
- Поддержка различных форматов сообщений.
- Разделение прав доступа к разным потокам сообщений.
- Простота эксплуатации.

---

## Сравнительная таблица популярных брокеров сообщений

| Брокер          | Кластеризация  | Хранение сообщений на диске | Скорость        | Форматы сообщений       | Разделение прав доступа | Простота эксплуатации | Комментарии                         |
|-----------------|----------------|-----------------------------|-----------------|------------------------|------------------------|----------------------|------------------------------------|
| **RabbitMQ**    | Да (кластер)   | Да                          | Высокая         | AMQP, MQTT, STOMP       | Да (vhosts, пользователи) | Средняя              | Широко распространён, много плагинов |
| **Apache Kafka**| Да (кластер)   | Да (журнал записей)         | Очень высокая   | Собственный (Avro, JSON, Protobuf) | Да (ACLs)               | Средняя              | Отлично подходит для потоковой обработки данных |
| **ActiveMQ**    | Да             | Да                          | Средняя         | JMS, AMQP, MQTT         | Да                     | Средняя              | Хорош для интеграции с Java-приложениями |
| **Redis Streams**| Ограниченная (кластер Redis) | Да (в памяти + на диск)    | Очень высокая   | Формат Redis            | Ограничено             | Высокая              | Быстрый, но с ограниченной функциональностью брокера |
| **NATS JetStream**| Да            | Да                          | Очень высокая   | JSON, Protocol Buffers  | Да                     | Высокая              | Современный, лёгкий, с хорошей производительностью |

---

## Выбор решения и обоснование

**Рекомендация:** **RabbitMQ**

- Поддерживает надёжную кластеризацию и устойчивость.
- Надёжное хранение сообщений на диске с подтверждением доставки.
- Поддерживает разные протоколы и форматы.
- Гибкая система прав доступа.
- Сравнительно проста в эксплуатации, много готовых интеграций.

**Альтернативы:**

- **Apache Kafka** — лучше для обработки больших потоков данных и аналитики, но сложнее в администрировании.
- **NATS JetStream** — современный и быстрый, но пока менее распространён.
- **Redis Streams** — хорошо подходит для быстрой очереди, но с ограничениями по функционалу.

---

# Итог

| Задача           | Выбор        | Обоснование                                                        |
|------------------|--------------|-------------------------------------------------------------------|
| API Gateway      | Kong         | Простота настройки, встроенная аутентификация, масштабируемость   |
| Брокер сообщений | RabbitMQ     | Надёжность, кластеризация, поддержка протоколов и прав доступа    |
